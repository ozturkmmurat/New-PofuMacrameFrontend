<div class="container-fluid">
  <div class="row">
    <div class="col-xl-3 col-lg-4 mt-5">
    <div class="card filter-div">
      <div class="card-header">
        <div class="d-flex mb-3">
          <div class="flex-grow-1">
            <h5 class="fs-16">Filtreler</h5>
          </div>
          <div class="flex-shrink-0">
            <a (click)="clearall($event)" class="text-decoration-underline">Hepsini
              Temizle</a>
          </div>
        </div>
      </div>

      <div class="accordion accordion-flush">
        <div class="card-body border-bottom" *ngIf="categories != null  && categories.length > 0">
          <div>
            <p class="text-muted text-uppercase fs-12 fw-medium mb-2">İlgili Kategoriler</p>
            <ul class="list-unstyled mb-0 filter-list">
              <li class="filter-list-option" *ngFor="let category of categories"
                routerLink="/productList/list/{{category.id}}">
                <a class="d-flex py-1 align-items-center">
                  <div class="flex-grow-1">
                    <h5 class="fs-13 mb-0 listname">{{category.categoryName}}</h5>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="card-body border-bottom">
          <p class="text-muted text-uppercase fs-12 fw-medium mb-3">Fiyat</p>
          <div class="mb-2">
            <label class="form-label small text-muted">Minimum Tutar</label>
            <input class="form-control form-control-sm" type="number" [(ngModel)]="minPrice" min="0" />
          </div>
          <div>
            <label class="form-label small text-muted">Maksimum Tutar</label>
            <input class="form-control form-control-sm" type="number" [(ngModel)]="maxPrice" min="0" />
          </div>
        </div>

        <ngb-accordion #acc="ngbAccordion" activeIds="static-1" [closeOthers]="true" [destroyOnHide]="false">
          <ngb-panel id="static-{{+i}}" *ngFor="let categoryAttribute of categoryAttributes let i = index">
            <ng-template ngbPanelTitle class="accordion-header" id="gen-ques-headingOne">
              <button class="border-0 bg-transparent" type="button" data-bs-toggle="collapse"
                data-bs-target="#gen-ques-collapseOne" aria-expanded="false" aria-controls="gen-ques-collapseOne">
                <span class="text-muted text-uppercase fs-12 fw-medium">{{categoryAttribute.attributeName}}</span>
              </button>
            </ng-template>
            <ng-template ngbPanelContent>
              <div class="accordion-body text-body p-0">
                <div class="d-flex flex-column gap-2 mt-3">
                  <div class="form-check"
                    *ngFor="let attributeValue of categoryAttribute.attributeValues let j = index">
                    <input class="form-check-input" name="checkAll" type="checkbox" value="Boat"
                      id="productBrandRadio-{{i+''+j}}"
                      [checked]="isAttributeValueSelected(categoryAttribute.attributeId, attributeValue.id)"
                      (change)="selectAttribute(categoryAttribute.attributeId, attributeValue.id, $event)">
                    <label class="form-check-label" for="productBrandRadio-{{i+''+j}}">{{attributeValue.value}}</label>
                  </div>
                  <div>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-panel>
        </ngb-accordion>
        <!-- end accordion-item -->
      </div>
      <div class="flex-grow-1 mt-3 mb-3">
        <div clasS="text-center">
          <button type="button" class="col-6 btn btn-warning w-lg waves-effect waves-light"
            (click)="applyFilter()">Filtreleri Uygula</button>
        </div>
      </div>
    </div>
    <!-- end card -->
  </div>
  <!-- end col -->


  <div class="col-xl-9 col-lg-8 mt-5">
    <div>
      <div class="card">
        <div class="card-header border-0">
          <div class="row g-4">
            <div class="col-sm">
              <div class="d-flex justify-content-sm-end">
                <div class="search-box ms-2">
                  <input type="text" name="searchTerm" class="form-control" placeholder="Ürün Ara..."
                    [(ngModel)]="filterText">
                  <i class="ri-search-line search-icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row products-grid">
          <div class="col-6 col-md-3 mb-4"
            *ngFor="let variant of productVariants | priceFilter:minPrice:maxPrice | productSearch: filterText; let i = index">
            <div class="day-product-slide" [routerLink]="'/productDetail/detail/'+variant.productId+'/'+variant.productVariantId">
                <div class="product-img position-relative thumbnail card-img-wrap" *ngIf="variant.productPaths?.length"
                  [class.thumbnail-hover]="variant.productPaths?.length >= 2">
                  <img loading="lazy" class="picture1 card-img card-img-product-category"
                    [src]="imageFolderUrl+variant.productPaths[0]" [alt]="variant.productName" />
                  <img *ngIf="variant.productPaths?.length >= 2" loading="lazy" class="picture2"
                    [src]="imageFolderUrl+variant.productPaths[1]" [alt]="variant.productName" />
                </div>
                <div class="card-footer category-card-footer text-center">
                  <h3 class="card-title fw-bold mb-2 text-truncate">{{ variant.productName }}</h3>
                  <p class="card-text text-muted mb-3">{{ variant.netPrice | number:'1.2' }} ₺</p>
                  <a class="btn btn-outline-dark btn-lg">HEMEN İNCELE</a>
                </div>
            </div>
          </div>
          <div class="col-12 text-center mt-3 mb-3" *ngIf="productVariants && startLengthState">
            <button *ngIf="productVariants.length < totalProduct" type="button"
              class="btn rounded-pill btn-warning waves-effect waves-light" (click)="getAllProductVariantDto()">DİĞER
              ÜRÜNLER</button>
          </div>
        </div>
      </div>
      <!-- end card -->
    </div>
  </div>
  <!-- end col -->
  </div>
</div>