<nav class="navbar navbar-expand-lg navbar-landing job-navbar is-sticky" id="navbar">
    <div class="container-fluid custom-container">
        <a class="navbar-brand" routerLink="">
            <img loading="lazy" src="assets/images/logo.PNG" class="card-logo card-logo-dark" alt="logo dark">
            <img loading="lazy" src="assets/images/logo.PNG" class="card-logo card-logo-light" alt="logo light">
        </a>
        <button class="navbar-toggler py-0 fs-20 text-body" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation" (click)="collapse.toggle()">
            <i class="mdi mdi-menu"></i>
        </button>

        <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed" class="collapse navbar-collapse"
            id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto mt-2 mt-lg-0 d-flex" id="navbar-example">
                <li class="nav-item">
                    <a class="nav-link active" href="javascript:void(0);" routerLink=""
                        [ngClass]="{'active':currentSection === 'hero'}">Anasayfa</a>
                </li>
                <div class="d-flex" *ngFor="let navbarCategory of categories let i = index">
                    <ng-container *ngIf="navbarCategory.subCategories.length > 0">
                        <li class="nav-item dropdown dropdown-hover position-static megamenu-li dmenu"
                        (mouseenter)="showDropdown(i)" (mouseleave)="hideDropdown(i)">
                        <a class="nav-link dropdown-toggle" [id]="'dropdown'+i" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false"
                            (click)="toggleDropdown(i)">{{navbarCategory.categoryName}}</a>
                        <div class="dropdown-menu dropdown-menu-end megamenu sm-menu border-top border-bottom"
                            [attr.aria-labelledby]="'dropdown' + i" style="width: 100%;"
                            [ngClass]="{'show': isDropdownOpen[i]}" (mouseenter)="showDropdown(i)"
                            (mouseleave)="hideDropdown(i)">
                            <div class="row">
                                <ng-container
                                    *ngIf="navbarCategory.subCategories && navbarCategory.subCategories.length > 0">
                                    <div class="col-sm-6 col-lg-3 border-end mb-4"
                                        *ngFor="let category of navbarCategory.subCategories">
                                        <h5 ngbDropdownItem routerLink="productList/list/{{+ category.id}}"><strong>{{category.categoryName}}</strong></h5>
                                        <a ngbDropdownItem routerLink="productList/list/{{+ subCategory.id}}"
                                            *ngFor="let subCategory of category.subCategories">{{subCategory.categoryName}}</a>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </li>
                    </ng-container>
                    
                </div>
                <li class="nav-item">
                    <a class="nav-link" href="javascript:void(0);"
                        [ngClass]="{'active':currentSection === 'blog'}">İletişim</a>
                </li>
            </ul>

            <!-- Cart -->
            <app-cart></app-cart>

            <div class="search-div" *ngIf="user == null">
                <a routerLink="/auth/login" class="btn btn-soft-primary"><i
                        class="ri-user-3-line align-bottom me-1"></i> Giriş Yap & Kayıt Ol</a>
            </div>

            <div class="dropdown ms-sm-3 header-item topbar-user" *ngIf="user" ngbDropdown>
                <button type="button" class="btn w-100 w-lg-auto text-start" id="page-header-user-dropdown" data-bs-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>
                    <span class="d-flex align-items-center">
                        <span class="text-start ms-xl-2">
                            <span
                                class="d-inline-block ms-1 ms-lg-0 fw-medium user-name-text">{{user.firstName}}</span>
                        </span>
                    </span>
                </button>
                <div class="dropdown-menu dropdown-menu-end navbar-user-dropdown" ngbDropdownMenu>
                    <a ngbDropdownItem routerLink="/userAccount/myaccount"><i
                            class="mdi mdi-account-circle text-muted fs-16 align-middle me-1"></i> <span
                            class="align-middle">Hesabım</span></a>
                    <div class="dropdown-divider"></div>
                    <a ngbDropdownItem href="javascript: void(0);" (click)="logOut()"><i
                            class="mdi mdi-logout text-muted fs-16 align-middle me-1"></i> <span class="align-middle"
                            data-key="t-logout">Çıkış Yap</span></a>

                </div>
            </div>

        </div>

    </div>
</nav>